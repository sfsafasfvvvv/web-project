import{_ as Q,u as K,K as X,L as J,r as u,c as Y,o as Z,a as g,b as d,d as p,e,i as o,g as i,m as v,t as n,k as c,n as T,f as O,F,h as P,E as l,I as ee,ah as te,X as se,a1 as ae,ai as oe,G as V,l as ne,$ as le,aa as ie}from"./index-237fd1da.js";import{f as re}from"./index-b42aae58.js";import"./index-54741844.js";const ce={class:"news-detail-page"},de={class:"container"},ue={class:"back-button"},pe={class:"news-header"},me={class:"news-meta"},_e={class:"category"},ve={class:"date"},he={class:"news-title"},fe={class:"news-info"},ge={class:"views"},we={class:"likes"},ye={class:"shares"},ke={class:"news-content"},Ce=["innerHTML"],be={class:"comments-section"},Se={key:0,class:"comment-input"},De={class:"comments-list"},xe={class:"comment-content"},Fe={class:"comment-header"},Pe={class:"username"},Ie={class:"date"},Le={class:"comment-text"},Ne={class:"comment-actions"},Te=["onClick"],Oe=["onClick"],Ve={class:"news-footer"},Re={class:"actions"},$e={class:"related-news"},Me={class:"news-list"},Ue=["onClick"],Ae={class:"news-info"},Be={class:"date"},ze={class:"share-options"},qe=["onClick"],Ee={__name:"NewsDetailPage",setup(Ge){const C=K(),I=X(),b=J(),L=u(!1),h=u(!1),w=u(!1),S=u(!1),m=u(""),y=u([]),k=Y(()=>b.isAuthenticated),r=u({}),N=u([]),R=[{type:"wechat",label:"WeChat",icon:V},{type:"link",label:"Copy Link",icon:le},{type:"qrcode",label:"QR Code",icon:ie}],$=async()=>{L.value=!0;try{const a=I.params.id;await new Promise(t=>setTimeout(t,1e3)),r.value={id:Number(a),title:"Platform Redesign Launch",category:"Announcements",date:new Date().toISOString(),views:1234,likes:56,shares:23,bgColor:"#fafafa",content:`
        <p>To provide a better user experience, the platform has undergone a complete redesign...</p>
        <h3>1. Interface Optimization</h3>
        <p>Adopting a new design language for a cleaner, more beautiful interface and smoother operation.</p>
        <h3>2. Feature Updates</h3>
        <p>Added multiple practical features to enhance user experience.</p>
        <h3>3. Performance Improvements</h3>
        <p>Optimized system performance for faster response times.</p>
      `},y.value=[{id:1,username:"User1",avatar:"https://example.com/avatar1.jpg",content:"The interface looks much better!",date:new Date(Date.now()-1e3*60*60).toISOString(),likes:5},{id:2,username:"User2",avatar:"https://example.com/avatar2.jpg",content:"Great improvements!",date:new Date(Date.now()-1e3*60*120).toISOString(),likes:3}],N.value=[{id:1,title:"Trust Trading Month Campaign",excerpt:"Participate to earn credit points and win prizes...",date:new Date(Date.now()-1e3*60*60*24).toISOString(),bgColor:"#f3e5f5"},{id:2,title:"Campus Trading Safety Guide",excerpt:"Important safety tips for campus trading...",date:new Date(Date.now()-1e3*60*60*48).toISOString(),bgColor:"#e1f5fe"}]}catch(a){console.error("Failed to load news:",a),l.error("Failed to load news details, please try again")}finally{L.value=!1}},M=async()=>{if(!m.value.trim()){l.warning("Please enter your comment");return}S.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),y.value.unshift({id:Date.now(),username:b.username,avatar:b.avatar,content:m.value,date:new Date().toISOString(),likes:0}),m.value="",l.success("Comment posted successfully")}catch(a){console.error("Failed to submit comment:",a),l.error("Failed to post comment, please try again")}finally{S.value=!1}},U=async a=>{if(!k.value){l.warning("Please login to like comments");return}try{a.likes++,l.success("Liked successfully")}catch(t){console.error("Failed to like comment:",t),l.error("Failed to like comment, please try again")}},A=a=>{if(!k.value){l.warning("Please login to reply to comments");return}m.value=`@${a.username} `},B=async()=>{if(!k.value){l.warning("Please login to favorite news");return}try{h.value=!h.value,h.value?(r.value.likes++,l.success("Added to favorites")):(r.value.likes--,l.success("Removed from favorites"))}catch(a){console.error("Failed to toggle like:",a),l.error("Operation failed, please try again")}},z=()=>{w.value=!0},q=async a=>{try{switch(a){case"wechat":l.success("WeChat sharing feature coming soon");break;case"link":await navigator.clipboard.writeText(window.location.href),l.success("Link copied to clipboard");break;case"qrcode":l.success("QR code sharing feature coming soon");break}}catch(t){console.error("Failed to share:",t),l.error("Share failed, please try again")}finally{w.value=!1}},E=a=>{C.push(`/news/${a.id}`)},G=()=>{C.push({path:"/login",query:{redirect:I.fullPath}})},D=a=>{if(!a)return"";try{return re(new Date(a),"yyyy-MM-dd",{locale:ee})}catch{return console.error("Invalid date:",a),""}};return Z(()=>{$()}),(a,t)=>{const f=g("el-button"),_=g("el-icon"),W=g("el-input"),j=g("el-avatar"),H=g("el-dialog");return d(),p("div",ce,[e("div",de,[e("div",ue,[o(f,{icon:"Back",onClick:t[0]||(t[0]=s=>v(C).back())},{default:i(()=>t[3]||(t[3]=[c("Back")])),_:1})]),e("div",pe,[e("div",me,[e("span",_e,n(r.value.category),1),e("span",ve,n(D(r.value.date)),1)]),e("h1",he,n(r.value.title),1),e("div",fe,[e("span",ge,[o(_,null,{default:i(()=>[o(v(te))]),_:1}),c(" "+n(r.value.views)+" views ",1)]),e("span",we,[o(_,null,{default:i(()=>[o(v(se))]),_:1}),c(" "+n(r.value.likes)+" favorites ",1)]),e("span",ye,[o(_,null,{default:i(()=>[o(v(ae))]),_:1}),c(" "+n(r.value.shares)+" shares ",1)])])]),e("div",{class:"news-cover",style:T({background:r.value.bgColor})},null,4),e("div",ke,[e("div",{class:"content",innerHTML:r.value.content},null,8,Ce)]),e("div",be,[e("h3",null,"Comments ("+n(y.value.length)+")",1),k.value?(d(),p("div",Se,[o(W,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),type:"textarea",rows:3,placeholder:"Write your comment..."},null,8,["modelValue"]),o(f,{type:"primary",loading:S.value,onClick:M},{default:i(()=>t[4]||(t[4]=[c(" Post Comment ")])),_:1},8,["loading"])])):(d(),O(f,{key:1,type:"primary",onClick:G},{default:i(()=>t[5]||(t[5]=[c("Login to Comment")])),_:1})),e("div",De,[(d(!0),p(F,null,P(y.value,s=>(d(),p("div",{key:s.id,class:"comment-item"},[o(j,{src:s.avatar},null,8,["src"]),e("div",xe,[e("div",Fe,[e("span",Pe,n(s.username),1),e("span",Ie,n(D(s.date)),1)]),e("p",Le,n(s.content),1),e("div",Ne,[e("span",{onClick:x=>U(s)},[o(_,null,{default:i(()=>[o(v(oe))]),_:1}),c(" "+n(s.likes),1)],8,Te),e("span",{onClick:x=>A(s)},[o(_,null,{default:i(()=>[o(v(V))]),_:1}),t[6]||(t[6]=c(" Reply "))],8,Oe)])])]))),128))])]),e("div",Ve,[e("div",Re,[o(f,{type:"primary",icon:h.value?"Star":"StarFilled",onClick:B},{default:i(()=>[c(n(h.value?"Favorited":"Favorite"),1)]),_:1},8,["icon"]),o(f,{type:"primary",plain:"",icon:"Share",onClick:z},{default:i(()=>t[7]||(t[7]=[c(" Share ")])),_:1})]),e("div",$e,[t[8]||(t[8]=e("h3",null,"Related News",-1)),e("div",Me,[(d(!0),p(F,null,P(N.value,s=>(d(),p("div",{key:s.id,class:"news-item",onClick:x=>E(s)},[e("div",{class:"news-image",style:T({background:s.bgColor})},null,4),e("div",Ae,[e("h4",null,n(s.title),1),e("p",null,n(s.excerpt),1),e("span",Be,n(D(s.date)),1)])],8,Ue))),128))])])])]),o(H,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=s=>w.value=s),title:"Share News",width:"360px"},{default:i(()=>[e("div",ze,[(d(),p(F,null,P(R,s=>e("div",{key:s.type,class:"share-option",onClick:x=>q(s.type)},[o(_,null,{default:i(()=>[(d(),O(ne(s.icon)))]),_:2},1024),e("span",null,n(s.label),1)],8,qe)),64))])]),_:1},8,["modelValue"])])}}},Qe=Q(Ee,[["__scopeId","data-v-db76c82a"]]);export{Qe as default};
