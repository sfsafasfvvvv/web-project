import{_ as G,u as O,K as Q,L as W,r as w,M as $,a as r,b,d as k,e as s,i as o,g as t,N as j,m as u,k as d,F as K,h as T,O as A,E as c}from"./index-237fd1da.js";const H={class:"login-page"},J={class:"auth-container"},X={class:"auth-card"},Y={class:"form-options"},Z={class:"social-login"},ee={class:"auth-footer"},se={class:"auth-banner"},oe={class:"banner-content"},te={class:"feature-list"},ne={__name:"LoginPage",setup(le){const{User:h,Lock:V,Check:x,Wallet:S,ChatLineRound:P,Platform:L,ChatDotRound:C,Service:R}=A,m=O(),U=Q(),q=W(),p=w(null),g=w(!1),n=$({account:"",password:"",remember:!1}),E={account:[{required:!0,message:"Please enter your username/phone/email",trigger:"blur"},{min:3,message:"Length should be at least 3 characters",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"},{min:6,message:"Password should be at least 6 characters",trigger:"blur"}]},_=[{type:"wechat",icon:L,title:"微信登录"},{type:"qq",icon:R,title:"QQ登录"},{type:"message",icon:C,title:"消息中心"}],F=async()=>{if(p.value)try{await p.value.validate(),g.value=!0,await q.login({username:n.account,password:n.password}),c.success("Successfully signed in");const a=U.query.redirect||"/";m.push(a)}catch(a){c.error(a.message||"Failed to sign in, please try again")}finally{g.value=!1}},I=async a=>{var e;if(a==="message"){localStorage.getItem("token")?m.push("/message"):c.warning("请先登录后再访问消息中心");return}c.info(`${((e=_.find(i=>i.type===a))==null?void 0:e.title)||a} 功能即将上线...`)},B=()=>{m.push("/forgot-password")};return(a,e)=>{const i=r("el-input"),v=r("el-form-item"),M=r("el-checkbox"),N=r("el-link"),y=r("el-button"),z=r("router-link"),D=r("el-form"),f=r("el-icon");return b(),k("div",H,[s("div",J,[s("div",X,[e[9]||(e[9]=s("div",{class:"auth-header"},[s("h2",null,"Welcome Back"),s("p",null,"Sign in to start your campus trading journey")],-1)),o(D,{ref_key:"formRef",ref:p,model:n,rules:E,class:"auth-form",onSubmit:j(F,["prevent"])},{default:t(()=>[o(v,{prop:"account"},{default:t(()=>[o(i,{modelValue:n.account,"onUpdate:modelValue":e[0]||(e[0]=l=>n.account=l),placeholder:"Username/Phone/Email","prefix-icon":u(h),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(v,{prop:"password"},{default:t(()=>[o(i,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=l=>n.password=l),type:"password",placeholder:"Password","prefix-icon":u(V),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s("div",Y,[o(M,{modelValue:n.remember,"onUpdate:modelValue":e[2]||(e[2]=l=>n.remember=l)},{default:t(()=>e[3]||(e[3]=[d("Remember me")])),_:1},8,["modelValue"]),o(N,{type:"primary",underline:!1,onClick:B},{default:t(()=>e[4]||(e[4]=[d(" Forgot password? ")])),_:1})]),o(y,{type:"primary",size:"large",class:"submit-btn",loading:g.value,"native-type":"submit"},{default:t(()=>e[5]||(e[5]=[d(" Sign In ")])),_:1},8,["loading"]),e[8]||(e[8]=s("div",{class:"divider"},[s("span",null,"Or continue with")],-1)),s("div",Z,[(b(),k(K,null,T(_,l=>o(y,{key:l.type,icon:l.icon,circle:"",class:"social-btn",onClick:ae=>I(l.type)},null,8,["icon","onClick"])),64))]),s("div",ee,[e[7]||(e[7]=s("span",null,"Don't have an account?",-1)),o(z,{to:"/register",class:"register-link"},{default:t(()=>e[6]||(e[6]=[d(" Sign up now ")])),_:1})])]),_:1},8,["model"])]),s("div",se,[s("div",oe,[e[13]||(e[13]=s("h2",null,"Campus Marketplace",-1)),e[14]||(e[14]=s("p",null,"Give your unused items a new life, make campus life better",-1)),s("ul",te,[s("li",null,[o(f,null,{default:t(()=>[o(u(x))]),_:1}),e[10]||(e[10]=s("span",null,"Safe and reliable trading environment",-1))]),s("li",null,[o(f,null,{default:t(()=>[o(u(S))]),_:1}),e[11]||(e[11]=s("span",null,"Guaranteed transactions, worry-free payments",-1))]),s("li",null,[o(f,null,{default:t(()=>[o(u(P))]),_:1}),e[12]||(e[12]=s("span",null,"Instant messaging for easy communication",-1))])])])])])])}}},ie=G(ne,[["__scopeId","data-v-5f9010c0"]]);export{ie as default};
